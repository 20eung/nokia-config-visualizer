# TiMOS-B-26.0.R1 both/x86_64 Nokia 7750 SR Copyright (c) 2000-2025 Nokia.
# All rights reserved. All use subject to applicable license agreements.
# Built on Thu Jan 9 00:00:00 PST 2026 by builder in /builds/c/260B/R1/panos/main/sros

# Configuration for PE-Router-1 (L2 VPN Services)

configure
#--------------------------------------------------
echo "System Configuration"
#--------------------------------------------------
    system
        name "PE-Router-1"
        location "Seoul DC"
        coordinates "37.5665N 126.9780E"
        contact "Network Operations"
        
        management-interface
            configuration-mode model-driven
        exit
        
        time
            zone KST
        exit
    exit

#--------------------------------------------------
echo "Router Configuration"
#--------------------------------------------------
    router Base
        interface "system"
            address 10.0.0.1/32
            no shutdown
        exit
        
        interface "to-PE2"
            address 192.168.1.1/30
            port 1/1/10
            no shutdown
        exit
        
        interface "to-PE3"
            address 192.168.2.1/30
            port 1/1/11
            no shutdown
        exit
        
        autonomous-system 65000
        
        mpls
            interface "to-PE2"
                no shutdown
            exit
            interface "to-PE3"
                no shutdown
            exit
        exit
        
        rsvp
            interface "to-PE2"
                no shutdown
            exit
            interface "to-PE3"
                no shutdown
            exit
        exit
        
        mpls
            path "to-PE2"
                no shutdown
            exit
            path "to-PE3"
                no shutdown
            exit
            
            lsp "LSP-to-PE2"
                to 10.0.0.2
                primary "to-PE2"
                no shutdown
            exit
            
            lsp "LSP-to-PE3"
                to 10.0.0.3
                primary "to-PE3"
                no shutdown
            exit
        exit
    exit

#--------------------------------------------------
echo "Service Configuration"
#--------------------------------------------------
    service
        customer 1 create
            description "Customer A - Enterprise"
        exit
        
        customer 2 create
            description "Customer B - Financial Services"
        exit
        
        customer 3 create
            description "Customer C - Retail Chain"
        exit
        
        #--------------------------------------------------
        # SDP Configuration
        #--------------------------------------------------
        sdp 10 mpls create
            description "To PE-Router-2"
            far-end 10.0.0.2
            lsp "LSP-to-PE2"
            keep-alive
                shutdown
            exit
            no shutdown
        exit
        
        sdp 20 mpls create
            description "To PE-Router-3"
            far-end 10.0.0.3
            lsp "LSP-to-PE3"
            keep-alive
                shutdown
            exit
            no shutdown
        exit
        
        #--------------------------------------------------
        # Epipe Services
        #--------------------------------------------------
        epipe 100 customer 1 create
            description "Customer A - HQ to Branch Office"
            service-mtu 1514
            
            sap 1/1/1:100 create
                description "HQ - Finance Department"
                ingress
                    qos 10
                exit
                egress
                    qos 10
                exit
            exit
            
            sap 1/1/2:100 create
                description "Branch Office - Finance"
                ingress
                    qos 10
                exit
                egress
                    qos 10
                exit
            exit
            
            no shutdown
        exit
        
        epipe 200 customer 1 create
            description "Customer A - Data Center to Remote Site"
            service-mtu 1514
            
            sap 1/1/3:200 create
                description "Data Center - Production Network"
                ingress
                    qos 20
                exit
                egress
                    qos 20
                exit
            exit
            
            spoke-sdp 10:200 create
                description "To Remote Site via PE2"
            exit
            
            no shutdown
        exit
        
        epipe 300 customer 2 create
            description "Customer B - Trading Floor to Backup Site"
            service-mtu 1514
            
            sap lag-1:300 create
                description "Trading Floor - Primary"
                ingress
                    qos 30
                exit
                egress
                    qos 30
                exit
            exit
            
            spoke-sdp 20:300 create
                description "To Backup Site via PE3"
            exit
            
            no shutdown
        exit
        
        #--------------------------------------------------
        # VPLS Services
        #--------------------------------------------------
        vpls 400 customer 1 create
            description "Customer A - Multi-Site LAN Extension"
            service-mtu 1514
            fdb-table-size 1000
            
            sap 1/1/4:400 create
                description "Site A - Main Office"
                ingress
                    qos 10
                exit
                egress
                    qos 10
                exit
            exit
            
            sap 1/1/5:400 create
                description "Site B - Regional Office"
                ingress
                    qos 10
                exit
                egress
                    qos 10
                exit
            exit
            
            sap 1/1/6:400 create
                description "Site C - Branch Office"
                ingress
                    qos 10
                exit
                egress
                    qos 10
                exit
            exit
            
            spoke-sdp 10:400 create
                description "To Site D via PE2"
            exit
            
            spoke-sdp 20:400 create
                description "To Site E via PE3"
            exit
            
            no shutdown
        exit
        
        vpls 500 customer 3 create
            description "Customer C - Retail Store Network"
            service-mtu 1514
            fdb-table-size 2000
            
            sap 1/1/7:500 create
                description "Store 1 - Gangnam"
                ingress
                    qos 10
                exit
                egress
                    qos 10
                exit
            exit
            
            sap 1/1/8:500 create
                description "Store 2 - Jongno"
                ingress
                    qos 10
                exit
                egress
                    qos 10
                exit
            exit
            
            sap 1/1/9:500 create
                description "Store 3 - Itaewon"
                ingress
                    qos 10
                exit
                egress
                    qos 10
                exit
            exit
            
            mesh-sdp 10:500 create
                description "To Store 4 via PE2"
            exit
            
            mesh-sdp 20:500 create
                description "To Store 5 via PE3"
            exit
            
            no shutdown
        exit
        
        vpls 600 customer 2 create
            description "Customer B - Branch Banking Network"
            service-mtu 1514
            fdb-table-size 1500
            
            sap 2/1/1:600 create
                description "Branch 1 - Seoul"
                ingress
                    qos 20
                exit
                egress
                    qos 20
                exit
            exit
            
            sap 2/1/2:600 create
                description "Branch 2 - Busan"
                ingress
                    qos 20
                exit
                egress
                    qos 20
                exit
            exit
            
            spoke-sdp 10:600 create
                description "To Branch 3 via PE2"
            exit
            
            no shutdown
        exit
    exit

#--------------------------------------------------
echo "QoS Configuration"
#--------------------------------------------------
    qos
        sap-ingress 10 create
            description "Standard Ingress QoS"
            queue 1 create
                queue-mgmt "default"
            exit
        exit
        
        sap-egress 10 create
            description "Standard Egress QoS"
            queue 1 create
                queue-mgmt "default"
            exit
        exit
        
        sap-ingress 20 create
            description "High Priority Ingress QoS"
            queue 1 create
                queue-mgmt "default"
            exit
        exit
        
        sap-egress 20 create
            description "High Priority Egress QoS"
            queue 1 create
                queue-mgmt "default"
            exit
        exit
        
        sap-ingress 30 create
            description "Critical Ingress QoS"
            queue 1 create
                queue-mgmt "default"
            exit
        exit
        
        sap-egress 30 create
            description "Critical Egress QoS"
            queue 1 create
                queue-mgmt "default"
            exit
        exit
    exit

#--------------------------------------------------
echo "Port Configuration"
#--------------------------------------------------
    port 1/1/1
        description "Customer A - HQ Finance"
        ethernet
            mode access
            encap-type dot1q
        exit
        no shutdown
    exit
    
    port 1/1/2
        description "Customer A - Branch Finance"
        ethernet
            mode access
            encap-type dot1q
        exit
        no shutdown
    exit
    
    port 1/1/3
        description "Customer A - Data Center"
        ethernet
            mode access
            encap-type dot1q
        exit
        no shutdown
    exit
    
    port 1/1/4
        description "Customer A - Site A"
        ethernet
            mode access
            encap-type dot1q
        exit
        no shutdown
    exit
    
    port 1/1/5
        description "Customer A - Site B"
        ethernet
            mode access
            encap-type dot1q
        exit
        no shutdown
    exit
    
    port 1/1/6
        description "Customer A - Site C"
        ethernet
            mode access
            encap-type dot1q
        exit
        no shutdown
    exit
    
    port 1/1/7
        description "Customer C - Store 1"
        ethernet
            mode access
            encap-type dot1q
        exit
        no shutdown
    exit
    
    port 1/1/8
        description "Customer C - Store 2"
        ethernet
            mode access
            encap-type dot1q
        exit
        no shutdown
    exit
    
    port 1/1/9
        description "Customer C - Store 3"
        ethernet
            mode access
            encap-type dot1q
        exit
        no shutdown
    exit
    
    port 1/1/10
        description "To PE-Router-2"
        ethernet
            mode network
        exit
        no shutdown
    exit
    
    port 1/1/11
        description "To PE-Router-3"
        ethernet
            mode network
        exit
        no shutdown
    exit
    
    port 2/1/1
        description "Customer B - Branch 1"
        ethernet
            mode access
            encap-type dot1q
        exit
        no shutdown
    exit
    
    port 2/1/2
        description "Customer B - Branch 2"
        ethernet
            mode access
            encap-type dot1q
        exit
        no shutdown
    exit
    
    lag 1 create
        description "Customer B - Trading Floor"
        mode access
        encap-type dot1q
        port 3/1/1
        port 3/1/2
        no shutdown
    exit

exit all
