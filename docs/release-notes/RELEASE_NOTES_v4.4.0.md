# Release Notes - v4.4.0 (3-Field Dictionary Structure & Bidirectional Search)

Dictionary 구조를 3개 필드로 개선하여 Config 검색 키워드와 사용자 검색어를 명확히 분리하고, 양방향 검색을 지원합니다.

## 주요 변경 사항

### 3-Field Dictionary Structure

- **역할 분리**: Config 검색용 키워드와 사용자 검색어를 별도 필드로 관리
  - `name`: 그룹 대표 이름 (예: "SK쉴더스")
  - `configKeywords`: Config description에 실제 존재하는 키워드들 (예: ["Bizen", "ADTCAPS", "SKShielders", "Infosec"])
  - `searchAliases`: 사용자 검색어 (예: ["SK쉴더스", "ISAC", "인포섹", "에스케이쉴더스"])
- **양방향 검색**: AI 챗봇이 configKeywords와 searchAliases 모두 검색 가능
  - 사용자가 "Bizen" 입력 → configKeywords 매칭 → 전체 configKeywords로 Config 검색
  - 사용자가 "SK쉴더스" 입력 → searchAliases 매칭 → 전체 configKeywords로 Config 검색
- **다중 키워드 지원**: 여러 Config 키워드를 하나의 entry로 그룹화

### Dictionary Editor UI 개선

- **3컬럼 테이블**: 각 필드의 역할을 명확히 구분
  - 그룹명 (15%): 대표 이름 입력
  - Config 키워드 (35%): Config description에 실제 존재하는 영문 키워드 (줄바꿈 구분)
  - 검색 별칭 (45%): 한국어, 약자 등 사용자 검색어 (줄바꿈 구분)
- **컬럼별 정렬**: 3개 컬럼 모두 클릭으로 오름차순/내림차순 정렬 지원
- **Placeholder 개선**: 각 필드의 용도를 명확히 안내
  - Config 키워드: "Bizen\nADTCAPS\nSKShielders\nInfosec"
  - 검색 별칭: "SK쉴더스\n에스케이쉴더스\nISAC\n인포섹"

### 버전 표시 통일

- 모든 UI에서 v4.4.0으로 일관되게 표시
  - V3Page.tsx: "Nokia Config Visualizer v4.4.0 (AI Visualizer)"
  - DictionaryEditor.tsx: "이름 사전 (Name Dictionary) - v4.4.0"

## Bug Fixes

- **Docker 빌드 오류 해결**: DictionaryEditor.tsx의 TypeScript 컴파일 에러 수정 (27개 오류)
  - v4.3.0 구조(`originalToken`, `aliases`)를 사용하던 코드를 v4.4.0으로 완전 마이그레이션
  - 모든 필드 접근을 v4.4.0 구조에 맞게 수정
- **타입 불일치 해결**: `dictionaryApi.ts`의 DictionaryGenerateResponse 타입을 서버와 동기화

## Technical Changes

### 타입 정의 업데이트

**src/types/dictionary.ts**:
```typescript
export interface DictionaryEntry {
  id: string;
  name: string;                  // 그룹 대표 이름
  configKeywords: string[];      // Config description 검색 키워드
  searchAliases: string[];       // 사용자 검색어
  autoGenerated: boolean;
  userEdited: boolean;
}
```

**src/services/dictionaryApi.ts**:
```typescript
export interface DictionaryGenerateResponse {
  entries: {
    name: string;
    configKeywords: string[];
    searchAliases: string[];
  }[];
}
```

### UI 컴포넌트 재작성

**src/components/v3/DictionaryEditor.tsx**:
- `keywordTexts` 상태 추가 (Config 키워드 textarea 관리)
- `sortField` 타입에 'configKeywords' 추가
- 저장 시 configKeywords, searchAliases 모두 동기화
- 중복 제거 로직에 configKeywords 필드 고려
- 테이블 정렬 로직에 configKeywords 필드 추가

## 파일 변경 요약

| 파일 | 변경 |
|---|---|
| `src/components/v3/DictionaryEditor.tsx` | 수정 - 3컬럼 UI, keywordTexts 상태 추가 |
| `src/services/dictionaryApi.ts` | 수정 - DictionaryGenerateResponse 타입 v4.4.0 대응 |
| `src/pages/V3Page.tsx` | 수정 - 버전 표시 v4.4.0으로 변경 |
| `README.md` | 수정 - v4.4.0 기능 설명 추가 |
| `CHANGELOG.md` | 수정 - v4.4.0 섹션 추가 |

## 마이그레이션 가이드

### v4.3.0 → v4.4.0

기존 v4.3.0 사전 데이터를 v4.4.0으로 마이그레이션하려면:

1. **AI 재생성 권장**: v4.3.0의 `aliases`는 Config 키워드와 검색어가 혼재되어 자동 분류 불가능
   - Dictionary Editor에서 "전체 삭제" 후 "AI 자동 생성" 클릭
   - AI가 자동으로 configKeywords와 searchAliases를 분류

2. **수동 마이그레이션 (선택)**:
   - v4.3.0: `{ originalToken: "Bizen", aliases: ["SK쉴더스", "ADTCAPS", ...] }`
   - v4.4.0:
     ```json
     {
       "name": "SK쉴더스",
       "configKeywords": ["Bizen", "ADTCAPS", "SKShielders", "Infosec"],
       "searchAliases": ["SK쉴더스", "ISAC", "인포섹"]
     }
     ```
   - Config description에 실제 존재하는 영문 키워드 → `configKeywords`
   - 한국어, 약자, 사용자 검색어 → `searchAliases`

## 검색 예시

### 양방향 검색 동작

**사전 데이터**:
```json
{
  "name": "SK쉴더스",
  "configKeywords": ["Bizen", "ADTCAPS", "SKShielders", "Infosec"],
  "searchAliases": ["SK쉴더스", "ISAC", "인포섹", "에스케이쉴더스"]
}
```

**검색 시나리오**:
| 사용자 입력 | 매칭 필드 | Config 검색 키워드 | 결과 |
|-------------|-----------|-------------------|------|
| "Bizen" | configKeywords | Bizen, ADTCAPS, SKShielders, Infosec | ✅ |
| "ADTCAPS" | configKeywords | Bizen, ADTCAPS, SKShielders, Infosec | ✅ |
| "SK쉴더스" | searchAliases | Bizen, ADTCAPS, SKShielders, Infosec | ✅ |
| "ISAC" | searchAliases | Bizen, ADTCAPS, SKShielders, Infosec | ✅ |
| "인포섹" | searchAliases | Bizen, ADTCAPS, SKShielders, Infosec | ✅ |

**핵심 원리**:
- 어떤 필드에 매칭되든 관계없이, 항상 `configKeywords` 전체를 OR 조건으로 Config description 검색
- 사용자는 한국어로 검색해도 모든 관련 Config 키워드가 자동으로 검색됨

## 개선 사항

- **검색 정확도 향상**: Config 키워드와 검색어를 분리하여 더 정확한 매칭 가능
- **다중 키워드 지원**: 여러 Config 키워드를 하나의 그룹으로 관리하여 검색 누락 방지
- **사용자 편의성**: Placeholder로 각 필드의 용도를 명확히 안내
- **데이터 품질**: AI 생성 시 Config 키워드와 검색어를 자동 분류하여 데이터 일관성 보장

---

**Full Changelog**: https://github.com/20eung/nokia-config-visualizer/compare/v4.3.0...v4.4.0
